Graphics.prototype.setFontStorTall = function () {
  // Actual height 54 (53 - 0)
  // 1 BPP
  return this.setFontCustom(
    atob('AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAf////w/gAf////w/gAf////w/gAf////w/gAf////w/gAf////w/gAf////w/gAf////wfgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAf/8AAAAAAf/8AAAAAAf/8AAAAAAf/8AAAAAAf/8AAAAAAf/8AAAAAAf/8AAAAAAf/8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAf/8AAAAAAf/8AAAAAAf/8AAAAAAf/8AAAAAAf/8AAAAAAf/8AAAAAAf/8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAD+AAAAAH8D+AAAAAH8D+AAAAAH8D+AAAAAH8D+/gAAAH8P//gAAAH////gAAf/////gAA//////gAA//////gAA//////gAA/////+AAA////+AAAA//8D+AAAA+H8D+AAAAAH8D+AAAAAH8D+AAAAAH8D+AAAAAH8D+AAAAAH8D//gAAAH8f//gAAAH////gAAf/////gAA//////gAA//////gAA//////gAA/////4AAA////+AAAA//8D+AAAA8H8D+AAAAAH8D+AAAAAH8D4AAAAAH8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAf///gAfgAf///gA/gAf///gA/gAf///gA/gAf///gA/gAf///gA/gAf///gA/gAf///gA/gAfwA/gA/gAfwA/gA/g///////////////////////////////////////////////////////////////AfwA/gA/gAfwA/gA/gAfwA/gA/gAfwA////gAfwA////gAfwA////gAfwA////gAfwA////gAfwA////gAfwA////gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAfwAAAABgAfwAAAAPgAfwAAAD/gAfwAAAf/gAfwAAD//gAfwAAf//gAfwAD///gAAAAf//+AAAAD///wAAAAf//+AAAAD///wAAAAf//+AAAAD///wAAAAf//+AAfgAf//wAA/gAf/+AAA/gAf/wAAA/gAf+AAAA/gAfwAAAA/gAcAAAAA/gAAAAAAA/gAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//wAf/gAA//8B//gAA//+D//gAA///H//gAA//////gAA//////gAA//////gAA//////gAA/gf/w/gAA/gP/g/gAA/gH+A/gAA/gD+A/gAA/gD+A/gAA/gD+A/gAA/gD+A/gAA/gD+A/gAA/gD+A/gAA//D///gAA//D///gAA//D///gAA//D///gAA//D///gAA//D///gAA/+D///gAAAAD+AAAAAAAD+AAAAAAAD+AAAAAAAD+AAAAAAAD+AAAAAAAD+AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAf/8AAAAAAf/8AAAAAAf/8AAAAAAf/8AAAAAAf/8AAAAAAf/8AAAAAAf/8AAAAAAf/8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH/////4AAP/////4AAf/////8AA//////+AA///////AB///////gD///////gH///////wH/AAAAB/4P+AAAAA/8f8AAAAAf8f8AAAAAP+P4AAAAAP4BwAAAAAHAAAAAAAAAAAAAAAAACADwAAAAAHgP4AAAAAP8f8AAAAAf+f+AAAAAf8P/AAAAA/4H/AAAAB/4D///////wD///////gB///////AA///////AAf/////+AAf/////8AAP/////4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPAAAAAAAB/AAAAAAAB/AAAAAAAB/A4AAAAAB/B8AAAAAA/j8AAAAAA/n+AAAAAAfv/AAAAAAf//AAAAB8P/8AAAAB///wAAAAB///gAAAAB//+AAAAAB///AAAAAB///wAAAAB///4AAAAAAf/+AAAAAAf//AAAAAAfn+AAAAAA/j+AAAAAA/h8AAAAAB/A4AAAAAB/AYAAAAAD/AAAAAAAA/AAAAAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAfgAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAB///4AAAAB///4AAAAB///4AAAAB///4AAAAB///4AAAAB///4AAAAB///4AAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/gAAAAAAA/mAAAAAAA/uAAAAAAA/+AAAAAAA/+AAAAAAA/8AAAAAAA/wAAAAAAAfgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAfgAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAAfgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAAAAPgAAAAAAD/gAAAAAAf/gAAAAAD//gAAAAAf//gAAAAD///gAAAAf//+AAAAD///wAAAAf//+AAAAD///wAAAAf//+AAAAD///wAAAAf//+AAAAAf//wAAAAAf/+AAAAAAf/wAAAAAAf+AAAAAAAfwAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAfwAAAA/gAfwAAAA/gAfwAAAA/gAfwAAAA/gAfwAAAA/gAfwAAAA/gAfwAAAA/gAfwAAAA/gAfwAAAA/gAfwAAAA/gAfwAAAA/gAfwAAAA/gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAfwA////gAfwA////gAfwA////gAfwA////gAfwA////gAfwA////gAfwA////gAfwA////gAfwA/gA/gAfwA/gA/gAfwA/gA/gAfwA/gA/gAfwA/gA/gAfwA/gA/gAfwA/gA/gAfwA/gA/gAfwA/gA/gAfwA/gA/gAfwA/gA/gAfwA/gA/gAf///gA/gAf///gA/gAf///gA/gAf///gA/gAf///gA/gAf///gA/gAf///gA/gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAfwAAAA/gAfwAfwA/gAfwAfwA/gAfwAfwA/gAfwAfwA/gAfwAfwA/gAfwAfwA/gAfwAfwA/gAfwAfwA/gAfwAfwA/gAfwAfwA/gAfwAfwA/gAfwAfwA/gAfwAfwA/gAfwAfwA/gAfwAfwA/gAfwAfwA/gAfwAfwA/gAfwAfwA/gAfwAfwA/gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAf///wAAAAf///wAAAAf///wAAAAf///wAAAAf///wAAAAf///wAAAAf///wAAAAf///wAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAf///gAfgAf///gA/gAf///gA/gAf///gA/gAf///gA/gAf///gA/gAf///gA/gAf///gA/gAfwA/gA/gAfwA/gA/gAfwA/gA/gAfwA/gA/gAfwA/gA/gAfwA/gA/gAfwA/gA/gAfwA/gA/gAfwA/gA/gAfwA/gA/gAfwA/gA/gAfwA/gA/gAfwA////gAfwA////gAfwA////gAfwA////gAfwA////gAfwA////gAfwA////gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAfwA/gA/gAfwA/gA/gAfwA/gA/gAfwA/gA/gAfwA/gA/gAfwA/gA/gAfwA/gA/gAfwA/gA/gAfwA/gA/gAfwA/gA/gAfwA/gA/gAfwA/gA/gAfwA////gAfwA////gAfwA////gAfwA////gAfwA////gAfwA////gAfwA////gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAfwA/gA/gAfwA/gA/gAfwA/gA/gAfwA/gA/gAfwA/gA/gAfwA/gA/gAfwA/gA/gAfwA/gA/gAfwA/gA/gAfwA/gA/gAfwA/gA/gAfwA/gA/gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAf///wA/gAf///wA/gAf///wA/gAf///wA/gAf///wA/gAf///wA/gAf///wA/gAf///wA/gAfwAfwA/gAfwAfwA/gAfwAfwA/gAfwAfwA/gAfwAfwA/gAfwAfwA/gAfwAfwA/gAfwAfwA/gAfwAfwA/gAfwAfwA/gAfwAfwA/gAfwAfwA/gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH8AA/gAAAH8AA/gAAAH8AA/gAAAH8AA/gAAAH8AA/gAAAH8AA/gAAAH8AA/gAAAH4AAfgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH8AA/gAAAH8AA/mAAAH8AA/uAAAH8AA/+AAAH8AA/+AAAH8AA/8AAAH8AA/wAAAH4AAfgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH+AAAAAAAH/AAAAAAAP/AAAAAAAP/gAAAAAAf/gAAAAAAf/wAAAAAA//wAAAAAA//4AAAAAA//4AAAAAB/v8AAAAAB/v8AAAAAD/H+AAAAAD/H+AAAAAH+H+AAAAAH+D/AAAAAP8D/AAAAAP8B/gAAAAP8B/gAAAAf4A/wAAAAf4A/wAAAA/wAf4AAAA/wAf4AAAB/gAf4AAAB/gAP4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB+PwAAAAAD+fwAAAAAD+fwAAAAAD+fwAAAAAD+fwAAAAAD+fwAAAAAD+fwAAAAAD+fwAAAAAD+fwAAAAAD+fwAAAAAD+fwAAAAAD+fwAAAAAD+fwAAAAAD+fwAAAAAD+fwAAAAAD+fwAAAAAD+fwAAAAAD+fwAAAAAD+fwAAAAAD+fwAAAAAD+fwAAAAAD+fwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB/gAP4AAAB/gAf4AAAA/wAf4AAAA/wAf4AAAAf4A/wAAAAf4A/wAAAAP8B/gAAAAP8B/gAAAAP8D/AAAAAH+D/AAAAAH+H+AAAAAD/H+AAAAAD/H+AAAAAB/v8AAAAAB/v8AAAAAA//4AAAAAA//4AAAAAA//wAAAAAAf/wAAAAAAf/gAAAAAAP/gAAAAAAP/AAAAAAAH/AAAAAAAH+AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAfwA/gAfwAfwA/gAfwAfwA/gAfwAfwA/gAfwAfwA/gAfwAfwA/gAfwAfwA/gAfwAfwAAAAfwAfwAAAAfwAfwAAAAfwAfwAAAAf///wAAAAf///wAAAAf///wAAAAf///wAAAAf///wAAAAf///wAAAAf///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//////gAA//////gAA//////gAA//////gAA//////gAA//////gAA//////gAA/AAAAfgAA/AAAAfgAA/Pj/+fgAA/Pj/+fgAA/Pj/+fgAA/Pj/+fgAA/Pj/+fgAA/Pjw+fgAA/Pjw+fgAA/Pjw+fgAA/Pjw+fgAA/Pjw+fgAA/P//+fgAA/P//+fgAA/P//+fgAA/P//+fgAA/P//+fgAA/P//+fgAA/AAA+fgAA////+fgAA////+fgAA////+fgAA////+fgAA////+fgAA////+fgAA////+fgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAHgAAAAAAA/gAAAAAAH/gAAAAAA//gAAAAAH//gAAAAA///gAAAAH///gAAAA///8AAAAH///gAAAA///8AAAAP///gAAAB////AAAAP////AAAAf//4/AAAAf//A/AAAAf/4A/AAAAf/AA/AAAAf/wA/AAAAf/+A/AAAAf//w/AAAAf////AAAAD////AAAAAf///AAAAAD///4AAAAAP///AAAAAB///4AAAAAP///AAAAAB///gAAAAAP//gAAAAAB//gAAAAAAP/gAAAAAAB/gAAAAAAAPgAAAAAAABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAfwAAAAfgAfwAAAA/gAfwAAAA/gAfwAAAA/gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAfwAfwA/gAfwAfwA/gAfwAfwA/gAfwAfwA/gAfwAfwA/gAfwAfwA/gAfwAfwA/gAfwAfwA/gAfwAfwA/gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAfwAAAA/gAfwAAAA/gAfwAAAA/gAfwAAAA/gAfwAAAA/gAfwAAAA/gAfwAAAA/gAfwAAAA/gAfwAAAA/gAfwAAAA/gAfwAAAA/gAfwAAAA/gAfwAAAA/gAfwAAAA/gAfwAAAA/gAfwAAAA/gAfwAAAA/gAfwAAAA/gAfwAAAA/gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAfwAAAAfgAfwAAAA/gAfwAAAA/gAfwAAAA/gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAfwAAAA/gAfwAAAA/gAfwAAAA/gAfwAAAA/gAfwAAAA/gAfwAAAA/gAfwAAAA/gAfwAAAA/gAfwAAAA/gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAfwAfwA/gAfwAfwA/gAfwAfwA/gAfwAfwA/gAfwAfwA/gAfwAfwA/gAfwAfwA/gAfwAfwA/gAfwAfwA/gAfwAfwA/gAfwAfwA/gAfwAfwA/gAfwAfwA/gAfwAfwA/gAfwAAAA/gAfwAAAA/gAfwAAAA/gAfwAAAA/gAfwAAAA/gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAfwAfwAAAAfwAfwAAAAfwAfwAAAAfwAfwAAAAfwAfwAAAAfwAfwAAAAfwAfwAAAAfwAfwAAAAfwAfwAAAAfwAfwAAAAfwAfwAAAAfwAfwAAAAfwAfwAAAAfwAfwAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAfwAAAA/gAfwAAAA/gAfwAAAA/gAfwAAAA/gAfwAfgA/gAfwA/gA/gAfwA/gA/gAfwA/gA/gAfwA/gA/gAfwA/gA/gAfwA/gA/gAfwA/gA/gAfwA////gAfwA////gAfwA////gAfwA////gAfwA////gAfwA////gAfwA////gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH//gAAAAAH//gAAAAAH//gAAAAAH//gAAAAAH//gAAAAAH//gAAAAAH//gAAAAAH//gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAAAB/4AAAAAAH/+AAAAAAP//AAAAAA///wAAAAB///4AAAAH/5/+AAAAf/w//gAAA//AP/wAAD/+AD/8AAH/4AB/+AAf/gAAf/gAf/AAAP/gAf8AAAD/gAf4AAAB/gAfgAAAAfgAfAAAAAPgAcAAAAADgAYAAAAABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAD//+AAAAAA///gAAAAAH//8AAAAAB///AAAAAAP//4AAAAAB///AAAAAAf//wAAAAAD//+AAAAAAf//gAAAAAH//gAAAAAA//gAAAAAAP/gAAAAAAP/gAAAAAB//gAAAAAH//gAAAAA///gAAAAH//8AAAAAf//wAAAAD//+AAAAAP//4AAAAB///AAAAAP//4AAAAA///gAAAAH//8AAAAAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAfwAAAA/gAfwAAAA/gAfwAAAA/gAfwAAAA/gAfwAAAA/gAfwAAAA/gAfwAAAA/gAfwAAAA/gAfwAAAA/gAfwAAAA/gAfwAAAA/gAfwAAAA/gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAfwAfwAAAAfwAfwAAAAfwAfwAAAAfwAfwAAAAfwAfwAAAAfwAfwAAAAfwAfwAAAAfwAfwAAAAfwAfwAAAAfwAfwAAAAfwAfwAAAAfwAfwAAAAf///wAAAAf///wAAAAf///wAAAAf///wAAAAf///wAAAAf///wAAAAf///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAfwAAAA/gAfwAAAA/gAfwAAAM/gAfwAAAP/gAfwAAAP/gAfwAAAP/gAfwAAAP/wAfwAAAP/+AfwAAAP//AfwAAAH//AfwAAAA//AfwAAAA//Af///////Af//////vAf//////gAf//////gAf//////gAf//////gAf//////gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAfwAfwAAAAfwAf4AAAAfwAf+AAAAfwAf/AAAAfwAf/wAAAfwAf/4AAAfwAf/+AAAfwAf//AAAfwAf//wAAfwAf3/8AAfwAfx/+AAfwAfwf/gAf///wP/gAf///wD/gAf///wB/gAf///wAfgAf///wAPgAf///wADgAf///wABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAf///gAfgAf///gA/gAf///gA/gAf///gA/gAf///gA/gAf///gA/gAf///gA/gAf///gA/gAfwA/gA/gAfwA/gA/gAfwA/gA/gAfwA/gA/gAfwA/gA/gAfwA/gA/gAfwA/gA/gAfwA/gA/gAfwA/gA/gAfwA/gA/gAfwA/gA/gAfwA/gA/gAfwA////gAfwA////gAfwA////gAfwA////gAfwA////gAfwA////gAfwA////gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAfgAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAfwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAAAAAAA/gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAeAAAAAAAAfwAAAAAAAf+AAAAAAAf/wAAAAAAf/+AAAAAAf//wAAAAAf//+AAAAAD///wAAAAAf//+AAAAAD///wAAAAAf///AAAAAD///4AAAAAf///AAAAAB///gAAAAAP//gAAAAAB//gAAAAAAP/gAAAAAA//gAAAAAH//gAAAAA///gAAAAP///gAAAB///8AAAAP///gAAAB///8AAAAP///AAAAB///4AAAAP///AAAAAf//4AAAAAf//AAAAAAf/4AAAAAAf/AAAAAAAf4AAAAAAAfAAAAAAAAYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAeAAAAAAAAfwAAAAAAAf+AAAAAAAf/wAAAAAAf/+AAAAAAf//wAAAAAf//+AAAAAD///wAAAAAf//+AAAAAD///wAAAAAf///AAAAAD///4AAAAAf///AAAAAB///gAAAAAP//gAAAAAB//gAYAAAAP/gAfAAAA//gAf4AAH//gAf/AA///gAf/4P///gAf/////8AAf/////gAAP////8AAAB////AAAAB////gAAAP////8AAAf/////gAAf/////8AAf/4H///gAf/AA///gAf4AAH//gAfAAAA//gAYAAAAf/gAAAAAD//gAAAAAf//gAAAAD///gAAAAf//+AAAAD///wAAAAf//+AAAAD///wAAAAf//+AAAAD///wAAAAf//+AAAAAf//wAAAAAf/+AAAAAAf/wAAAAAAf+AAAAAAAfgAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAYAAAAADgAcAAAAAPgAfAAAAAfgAfwAAAB/gAf8AAAH/gAf/AAAf/gAf/wAB//gAP/4AH/+AAD/+Af/4AAB//h//wAAAf/7//AAAAH///8AAAAB///wAAAAAf//AAAAAAP/8AAAAAA///AAAAAD///wAAAAP///4AAAAf/7/+AAAB//h//gAAH/+Af/4AAf/4AH/+AAf/gAB//AAf+AAAf/gAf8AAAP/gAfwAAAD/gAfAAAAA/gAcAAAAAPgAQAAAAADgAAAAAAABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAf///wAfgAf///wA/gAf///wA/gAf///wA/gAf///wA/gAf///wA/gAf///wA/gAf///wA/gAAAAfwA/gAAAAfwA/gAAAAfwA/gAAAAfwA/gAAAAfwA/gAAAAfwA/gAAAAfwA/gAAAAfwA/gAAAAfwA/gAAAAfwA/gAAAAfwA/gAAAAfwA/gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAf//////gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAfwAAAAAgAfwAAAADgAfwAAAAPgAfwAAAA/gAfwAAAH/gAfwAAAf/gAfwAAB//gAfwAAH//gAfwAAf//gAfwAD///gAfwAP///gAfwA//+/gAfwD//w/gAfwP//A/gAfw//8A/gAf3//wA/gAf///AA/gAf//4AA/gAf//gAA/gAf/+AAA/gAf/4AAA/gAf/gAAA/gAf8AAAA/gAfwAAAA/gAfAAAAA/gAcAAAAA/gAQAAAAA/gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH///////wH///////wH///////wH///////wH///////wH///////wHgAAAAABwHAAAAAABwHAAAAAAAwHAAAAAAAwGAAAAAAAwGAAAAAAAwGAAAAAAAwAAAAAAAAAHAAAAAAAAH8AAAAAAAH/gAAAAAAH/+AAAAAAAf/4AAAAAAB//gAAAAAAH/+AAAAAAAf/4AAAAAAB//AAAAAAAP/8AAAAAAA//wAAAAAAD//AAAAAAAP/wAAAAAAA/wAAAAAAAHwAAAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAAAwGAAAAAAAwHAAAAAAAwHAAAAAAAwHAAAAAABwHAAAAAABwH///////wH///////wH///////wH///////wH///////wH///////wAAAAAAAAAA='),
    32,
    atob("JAwWJR8bIQwUDx4aDBoMGh8MHx8fHx8fHx8MDBsaGx8kJx8fHx8fHx8MHR4fLB8fHx8fHx8fJzcjHx8TEA8="),
    54 | 65536
  );
};

Graphics.prototype.setFontStorMedium = function () {
  // Actual height 26 (25 - 0)
  // 1 BPP
  return this.setFontCustom(
    atob('AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//xwP/+cD//nA//5wAAAAAAAAA/gAAP4AAD+AAA/gAAAAAAAAAAA/gAAP4AAD+AAAAAAAAAAAAABwAAceAAPH8AD//AP//wD//8A//4AP8eAAPHgADx5AA//wD//8A///AP/+AD/HgADxwAAYAAAAAAAAAAAH/wOB/8Dgf/A4H/wOBwcDj///+/////////////HBwOBwf/gcH/4HB/+Bwf/gAAAAAAAAAAAADgABA4ADwOAH8DgP/AAf/AA/+AB/8AA/4BwPwAcDgAHAAABwAAAAAAAAAH8fwD/v8A///AP//wDx88A8ePAPHjwDx48A/f/AP3/wD9/8Aff/AAHgAAB4AAAAAAAAAAP4AAD+AAA/gAAP4AAAAAAAAAAAAAAAAH//wD//+B///g///8PAAPnwAB84AAOAAAABgAAx4AAffAAPj///4f//8D//+A///AAAAAAAAAAMAAAHAAAB5gAAe8AAD/AAP/AAD/gAA/8AAA/wAAf8AAHuAABwAAAMAAAAAAAAAAAAAAAAAcAAAHAAABwAAH/wAB/8AAf/AAD/gAAHAAABwAAAcAAAAAAAAAAAAAHAAAB8AAAfAAAHgAAAAAAAAAAAAAAHAAABwAAAcAAAHAAABwAAAcAAAHAAABwAAAcAAAHAAAAAAAAAAAAABwAAAcAAAHAAABwAAAAAAAAAAAAAAAAEAAAPAAAfwAA/8AB/8AD/4AH/wAD/gAA/AAAOAAAAAAAAAAAAP//8D///A///wP//8DgAHA4ABwOAAcDgAHA4ABwOAAcD///A///wP//8D///AAAAAAAAAD///A///wP//8D///AAAAAAAAADg//A4P/wOD/8Dg//A4OBwODgcDg4HA4OBwODgcDg4HA/+BwP/gcD/4HA/+BwAAAAAAAAA4ABwOBwcDgcHA4HBwOBwcDgcHA4HBwOBwcDgcHA4HBwP//8D///A///wP//8AAAAAAAAAABwAD/8AA//AAP/wAAA8AAAHAAABwAAAcAAAHAAABwAD///A///wP//8D///AAAAAAAAAD/4HA/+BwP/gcD/4HA4OBwODgcDg4HA4OBwODgcDg4HA4P/wOD/8Dg//A4P/wAAAAAAAAA///wP//8D///A///wODgcDg4HA4OBwODgcDg4HA4OBwOD/8Dg//A4P/wOD/8AAAAAAAAAOAAADgAAA4AAAOAAADgAAA4AAAOAAADgAAA4AAAOAAAD///A///wP//8D///AAAAAAAAAD///A///wP//8D///A4OBwODgcDg4HA4OBwODgcDg4HA///wP//8D///A///wAAAAAAAAA//BwP/wcD/8HA//BwOBwcDgcHA4HBwOBwcDgcHA4HBwP//8D///A///wP//8AAAAAAAAAAHAcABwHAAcBwAHAcAAAAAAAAAAHAcABwHwAcB8AHAeAAAAAAAAAAB8AAAfAAAP4AAD+AAA/wAAe8AAHvgADx4AA8eAAeDwAHg8AAAAAAAAAAAAAAAO4AADuAAA7gAAO4AADuAAA7gAAO4AADuAAA7gAAO4AAAAAAAAAAB4PAAeDwADw8AA8eAAPngAB7wAAe8AAD+AAA/gAAH4AAB8AAAAAAAAAAOAAADgAAA4AAAOAAADgAAA4HBwOBwcDgcHA4HAAOBwAD/8AA//AAP/wAD/8AAAAAAAAAAA///AP//wD//8A4AHAO7/wDu/8A7v/AO7PwDuz8A7//AO//wDv/8A4A/AP//wD//8A///AAAAAAAAAAAAAAAABwAAD8AAH/AAP/gAf/AA//AA/9wAP4cAD+HAA/9wAD/8AAH/wAAP/gAAf8AAA/AAABwAAAAAAAAA4ABwOAAcD///A///wP//8D///A4HBwOBwcDgcHA4HBwP//8D///A///wP//8AAAAAAAAAP//8D///A///wP//8DgAHA4ABwOAAcDgAHA4ABwOAAcDgAHA4ABwOAAcDgAHAAAAAAAAADgAHA4ABwP//8D///A///wP//8DgAHA4ABwOAAcDgAHA///wP//8D///A///wAAAAAAAAA///wP//8D///A///wOBwcDgcHA4HBwOBwcDgcHA4HBwOBwcDgAHA4ABwOAAcAAAAAAAAAP//8D///A///wP//8DgcAA4HAAOBwADgcAA4HAAOBwADgcAA4AAAOAAADgAAAAAAAAAAAD///A///wP//8D///A4ABwOAAcDg4HA4OBwODgcDg4HA4P/wOD/8Dg//A4P/wAAAAAAAAAAHAAP//8D///A///wADwAAAcAAAHAAABwAAAcAAAHAAP//8D///A///wP//8AAAAAAAAAP//8D///A///wP//8AAAAAAAAAAAP8AAD/AAA/wAAP8AAAHAAABwAAAcAAAHAAABwP//8D///A///wP//8AAAAAAAAAP//8D///A///wP//8AB+AAA/wAA//AAfn4AfgfgPwD8DwAPA4ABwIAAEAAAAAAAAAP//8D///A///wP//8AAAHAAABwAAAcAAAHAAABwAAAcAAAHAAABwAAAcAAAHAAAAAAAAAD///A///wP//8D///Af8AAB/4AAD/wAAH/AAAf8AAA/AAAPwAAf8AAf8AA/8AA/4AB/4AA///wP//8D///A///wAAAAAAAAA///wP//8D///A///wOAAADgAAA4AAAOAAADgAAA4AAAP//8D///A///wP//8AAAAAAAAAP//8D///A///wP//8DgAHA4ABwOAAcDgAHA4ABwOAAcD///A///wP//8D///AAAAAAAAAD///A///wP//8D///A4HAAOBwADgcAA4HAAOBwADgcAA//AAP/wAD/8AA//AAAAAAAAAAA///wP//8D///A///wOAAcDgAXA4AHwOAB+DgAfw4AD8P///D///A///wP//8AAAAAAAAAP//8D///A///wP//8DgcAA4HwAOB+ADgf4A4H/AOB34D/8fA//DwP/wMD/8BAAAAAAAAAD/4HA/+BwP/gcD/4HA4OBwODgcDg4HA4OBwODgcDg4HA4P/wOD/8Dg//A4P/wAAAAAAAAAAAAAOAAADgAAA4AAAOAAAD///A///wP//8D///A4AAAOAAADgAAA4AAAOAAAAAAAAAAAAP//8D///A///wP//8AAAHAAABwAAAcAAAHAAABwAAAcD///A///wP//8D///AAAAAAAAAAAAAA4AAAPwAAD/gAAf/AAA/+AAB/8AAD/wAAH8AAB/AAD/wAH/wAP/gAf/AAP+AAD8AAA4AAAAAAAAAAAAAAAAOAAAD8AAA/4AAH/wAAP/gAAf/AAA/8AAB/A4AfwPw/8D//8Af/4AH/+AD//8A/D/wOAH8AAB/AAD/wAH/wAP/gAf/AAP+AAD8AAA4AAAAAAAAAAAAAAAAMAAMDgAPA+APwP4P8A/v8AD/8AAf8AAH/AAH/8AH8fwD+D+A+APwOAA8CAADAAAAAAAAAAAcAA//BwP/wcD/8HAAPBwABwcAAcHAAHBwABwcAAcHA///wP//8D///A///wAAAAAAAAA4AAAOAAcDgAfA4AfwOAf8Dgf/A4f5wO/4cD/4HA/4BwP4AcD4AHAwABwAAAcAAAAAAAAAAAAAD///4///+P///jAAAYgAACIAAAiAAAIAAAAOAAAD+AAAH8AAAH8AAAP8AAAP8AAAPgAAAAAAAAIAAAiAAAIwAAGP///j///4///+AAAAAA=='),
    32,
    atob("EQYLExAOEAYKCA8NBg0GDRAGEBAQEBAQEBAGBg0NDRASExAQEBAQEBAGDw8QFhAQEBAQEBAQExsREBAKCAg="),
    26 | 65536
  );
};

Graphics.prototype.setFontStorSmall = function () {
  // Actual height 16 (15 - 0)
  // 1 BPP
  return this.setFontCustom(
    atob('AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/9j/2AAAAAD4APgAAAD4APgAAAAAAAxgD/h/+H/wDGAMeD/4f/h+YAwAAAAAAD+GP4Yxhv////8xhjH+Mf4AAAAAwAjAeMP4H+D+GPAYgBgAAAAAP/g/+DOYMxg7+Dv4O/gDAAMAAAAAAPgA+AAAAAAAH/w//n//8AdgAgAAYAPwB3/+P/4AAAAAGAAbAF+AfgB/AB+AGQAIAAAAAAADAAMAH+Af4AMAAwADAAAAAAAAHAAcAAAAAAMAAwADAAMAAwADAAMAAAAAAAAYABgAAAAAAAgAeAP4H+D+APAAgAAAAAAA//j/+MAYwBjAGMAY//j/+AAAAAD/+P/4AAAAAMf4x/jGGMYYxhjGGP4Y/hgAAAAAwxjDGMMYwxjDGMMY//j/+AAAAAD/AP8AAwADAAMAAwD/+P/4AAAAAP4Y/hjGGMYYxhjGGMf4x/gAAAAA//j/+MYYxhjGGMYYx/jH+AAAAADAAMAAwADAAMAAwAD/+P/4AAAAAP/4//jGGMYYxhjGOP/4//gAAAAA/xj/GMMYwxjDGMMY//j/+AAAAAAMGAwYAAAAAAwcDBwAAAAAA4AHwAfADuAO4BxwHHAAAAAABsAGwAbABsAGwAbABsAAAAAAHHAOYA7gB8AHwAPAA4AAAAAAwADAAMMYwxjDGMMA/wD/AAAAAAA/+D/4Pfg9+D14P/g/+D/4P/gAAAAAABgA+A/wf4D9gPmA/4Af4AH4ADgAAAAAwBj/+P/4wxjDGMMY//j/+AAAAAD/+P/4wBjAGMAYwBjAGMAYAAAAAMAY//j/+MAYwBjAGP/4//gAAAAA//j/+MMYwxjDGMMYwxjAGAAAAAD/+P/4wwDDAMMAwwDDAMAAAAAAAP/4//jAGMYYxhjGGMf4x/gAAAAA//j/+AMAAwADAAMA//j/+AAAAAD/+P/4AAAAGAD4APgAGAAYABj/+P/4AAAAAP/4//gPgB/AfPDweMAYgAgAAAAA//j/+AAYABgAGAAYABgAGAAAAAD/+P/4/wAfwAP4AHgA+AfwP4D/+P/4//gAAAAA//j/+MAAwADAAMAA//j/+AAAAAD/+P/4wBjAGMAYwBj/+P/4AAAAAP/4//jDAMMAwwDDAP8A/wAAAAAA//j/+MAYwHjAfMA+//j/+AAAAAD/+P/4wwDDwMPgw3j/OP8IAAAAAP4Y/hjGGMYYxhjGGMf4x/gAAAAAwADAAMAA//j/+MAAwADAAAAAAAD/+P/4ABgAGAAYABj/+P/4AAAAAMAA+AB/gA/wAfgA+Af4P8D8AOAAAAAAAMAA+AB/gA/wAfjg+P/4f8D/8OH4APgP8H+A/ADgAAAAAACAGOA4+Pg/4B+AP+D48OA4gBgAAAAA/xj/GAMYAxgDGAMY//j/+AAAAADAGMB4w/jP+P8Y/BjwGIAYAAAAAP/+//6ABoACAADgAH4AB+AAfAAGAACAAoAC//7//gAA'),
    32,
    atob("CwQHDAoJCwQHBQoJBAkECQoECgoKCgoKCgoEBAkJCQoLDAoKCgoKCgoECQoKDgoKCgoKCgoKDBELCgoGBgU="),
    16 | 65536
  );
};
{
  const SETTINGS_FILE = "quirkytimeclock.json";
  let settings = Object.assign({
    'theme': 'System',
    'showdate': true,
    'clkinfoborder': false,
    'buzzOnQuirkyTime': true,
    'isEmulator': true,
  }, require("Storage").readJSON(SETTINGS_FILE, 1) || {});

  let background;
  if (!settings.isEmulator) {
    background = require("clockbg");
  }
  let theme;
  let drawTimeout;

  const h = g.getHeight();
  const w = g.getWidth();
  //const ha = 2*h/5 - 4;
  const h2 = Math.round(3 * h / 5) - 10;
  const h3 = Math.round(7 * h / 8);



  const decorators = [
    {
      "name": "SAMESIES",
      "validator": (hours, minutes) => {
        return hours == minutes;
      },
      "tests": [
        {
          "hours": "12",
          "minutes": "12",
          "expected": true
        },
        {
          "hours": "10",
          "minutes": "11",
          "expected": false
        }
      ]
    },
    {
      "name": "FOUR_OF_A_KIND",
      "validator": (hours, minutes) => {
        const str = hours + minutes;

        if (str.length === 0) return false;

        const firstChar = str[0];
        return str.split("").every((char) => char === firstChar);
      },
      "tests": [
        {
          "hours": "11",
          "minutes": "11",
          "expected": true
        },
        {
          "hours": "10",
          "minutes": "11",
          "expected": false
        }
      ]
    },
    {
      "name": "TWO_PAIRS",
      "validator": (hours, minutes) => {
        let firstChar = hours[0];
        const hoursSameChar = hours.split("").every((char) => char === firstChar);

        firstChar = minutes[0];
        const minutesSameChar = minutes.split("").every((char) => char === firstChar);

        return hoursSameChar && minutesSameChar;
      },
      "tests": [
        {
          "hours": "00",
          "minutes": "11",
          "expected": true
        },
        {
          "hours": "10",
          "minutes": "11",
          "expected": false
        }
      ]
    },
    {
      "name": "PALINDROM",
      "validator": (hours, minutes) => {
        const str = hours + minutes;
        const reversed = str.split("").reverse().join("");

        return str == reversed;
      },
      "tests": [
        {
          "hours": "12",
          "minutes": "21",
          "expected": true
        },
        {
          "hours": "12",
          "minutes": "22",
          "expected": false
        }
      ]
    },
    {
      "name": "SYMETRIC",
      "validator": (hours, minutes) => {
        symetrics = {
          "0": "0",
          "1": "1",
          "2": "5",
          "5": "2",
          "6": "6",
          "8": "8",
          "9": "6",
        };

        let hasSymetry = true;
        const hoursPalindrom = hours.split("").map((char) => {
          if (symetrics[char] == undefined) {
            hasSymetry = false;
            return;
          }

          return symetrics[char];
        }).reverse().join("");

        if (!hasSymetry) {
          return false;
        }

        return hoursPalindrom == minutes;
      },
      "tests": [
        {
          "hours": "22",
          "minutes": "55",
          "expected": true
        },
        {
          "hours": "22",
          "minutes": "11",
          "expected": false
        }
      ]
    },
    {
      "name": "MISC",
      "validator": (hours, minutes) => {
        times = [
          "1337",
          "1234",
          "2345",
        ];
        return times.indexOf(hours + minutes) != -1;
      }
    },
    {
      "name": "YEAR",
      "validator": (hours, minutes) => {
        d = new Date();
        return d.getFullYear() == hours + minutes;
      }
    }
  ];


  let drawDate = function (date) {
    if (settings.showdate) {
      g.setColor(theme.fg).fillRect(0, h3 + 5, w, h); // refresh date background
      g.setFontStorSmall().setFontAlign(0, -1);

      const todayDay = date.getDate().toString().padStart(2, "0");
      const todayMonth = (date.getMonth() + 1).toString().padStart(2, "0");
      const todayYear = date.getFullYear();
      const today = todayDay + "/" + todayMonth + "/" + todayYear;
      g.setColor(theme.bg).drawString(today, w / 2, h3 + 5);
    }
  };

  let drawTime = function (date) {
    const hours = date.getHours().toString().padStart(2, '0');
    const minutes = date.getMinutes().toString().padStart(2, '0');
    g.setFontStorTall().setFontAlign(0, -1);
    g.setColor(theme.fg);
    decorators.forEach((item) => {
      if (item.validator(hours, minutes)) {
        const colors = ["#1E3F66", "#047857", "#003366", "#228B22", "#36454F"];
        const randomColor = colors.sort(() => 0.5 - Math.random()).slice(0, 1).pop();
        g.setColor(randomColor);

        if (settings.buzzOnQuirkyTime) {
          Bangle.buzz();
        }
      }
    });
    g.drawString(hours + ":" + minutes, w / 2, h2 + 8);
  };

  let draw = function () {
    g.reset();
    g.setBgColor(theme.bg).clearRect(0, h2, w, h3); // clear area where clock is

    let date = new Date();
    drawDate(date);
    drawTime(date);

    // queue next draw
    if (drawTimeout) clearTimeout(drawTimeout);
    drawTimeout = setTimeout(function () {
      drawTimeout = undefined;
      draw();
    }, 60000 - (Date.now() % 60000));
  };

  let loadThemeColors = function () {
    theme = { fg: g.theme.fg, bg: g.theme.bg };
    if (settings.theme === "Dark") {
      theme.fg = g.toColor(1, 1, 1);
      theme.bg = g.toColor(0, 0, 0);
    } else if (settings.theme === "Light") {
      theme.fg = g.toColor(0, 0, 0);
      theme.bg = g.toColor(1, 1, 1);
    }
  };
  loadThemeColors();

  // Load the clock infos
  let clockInfoMenuA;
  let clockInfoMenuB;
  let loadClockInfos = function () {
    let clockInfoW = 0 | (w / 2);
    let clockInfoH = 0 | (h / 2);
    let clockInfoG = Graphics.createArrayBuffer(26, 26, 2, { msb: true });
    clockInfoG.transparent = 3;
    clockInfoG.palette = new Uint16Array([g.theme.bg, g.theme.fg, g.toColor("#888"), g.toColor("#888")]);
    let clockInfoItems = require("clock_info").load();
    let clockInfoDraw = (itm, info, options) => {
      // itm: the item containing name/hasRange/etc
      // info: data returned from itm.get() containing text/img/etc
      // options: options passed into addInteractive
      // Clear the background - if focussed, add a border
      g.reset().setBgColor(theme.bg).setColor(theme.fg);
      let y, b = 0; // border
      if (options.focus) { // white border
        b = 4;
        g.clearRect(options.x, options.y, options.x + options.w - 1, options.y + options.h - 1);
      }
      background.fillRect(options.x + b, options.y + b, options.x + options.w - 1 - b, options.y + options.h - 1 - b);
      // we're drawing center-aligned here
      let midx = options.x + options.w / 2;
      if (info.img) { // draw the image
        // TODO: we could replace certain images with our own ones here...
        y = options.y + 8;
        if (settings.clkinfoborder)
          require("clock_info").drawBorderedImage(info.img, midx - 24, y, { scale: 2 });
        else
          require("clock_info").drawFilledImage(info.img, midx - 24, y, { scale: 2 });
      }
      g.setFontStorMedium().setFontAlign(0, 0);
      let txt = info.text.toString().toUpperCase();
      if (g.stringWidth(txt) > options.w) // if too big, smaller font
        g.setFontStorSmall();
      if (g.stringWidth(txt) > options.w) {// if still too big, split to 2 lines
        let l = g.wrapString(txt, options.w);
        txt = l.slice(0, 2).join("\n") + (l.length > 2) ? "..." : "";
      }
      y = options.y + options.h - 12;
      if (settings.clkinfoborder) {
        g.setColor(theme.bg)
        g.drawString(txt, midx - 2, y).drawString(txt, midx + 2, y).drawString(txt, midx, y - 2).drawString(txt, midx, y + 2);
        g.setColor(theme.fg);
      }
      g.drawString(txt, midx, y); // draw the text
    };

    clockInfoMenuA = require("clock_info").addInteractive(clockInfoItems, {
      app: "quirkytimeclock",
      x: 0, y: 0, w: clockInfoW, h: clockInfoH,
      draw: clockInfoDraw
    });
    clockInfoMenuB = require("clock_info").addInteractive(clockInfoItems, {
      app: "quirkytimeclock",
      x: w / 2, y: 0, w: clockInfoW, h: clockInfoH,
      draw: clockInfoDraw
    });
  };
  loadClockInfos();

  // Show launcher when middle button pressed
  Bangle.setUI({
    mode: "clock",
    redraw: draw,
    remove: function () {
      // Called to unload all of the clock app
      if (drawTimeout) clearTimeout(drawTimeout);
      drawTimeout = undefined;
      clockInfoMenuA.remove();
      clockInfoMenuB.remove();
      delete Graphics.prototype.setFontStorSmall;
      delete Graphics.prototype.setFontStorMedium;
      delete Graphics.prototype.setFontStorTall;
      require("widget_utils").show(); // re-show widgets
    },
    touch: (n, e) => {
      if (e.x >= 0 && e.x <= w && e.y >= h / 2 && e.y <= h) {
      }
    }
  });


  Bangle.loadWidgets();
  require("widget_utils").swipeOn(); // hide widgets, make them visible with a swipe
  background.fillRect(Bangle.appRect); // start off with completely clear background
  // background contrast bar
  g.setColor(theme.fg).fillRect(0, h2 - 6, w, h3 + 6);

  draw();

}